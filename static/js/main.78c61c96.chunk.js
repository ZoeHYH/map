(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{87:function(e,n,t){"use strict";t.r(n);var a,r,c,i,o,l,s,d,j,b,u=t(0),h=t(7),O=t.n(h),p=t(35),m=t(39),x=t(19),f=t(18),g=t(73),v=t(14),_=t(123),w=t(110),k=t(113),y=t(69),S=t.n(y),D=t(4),C=Object(v.c)(w.a)(a||(a=Object(f.a)(["\n  z-index: 3000;\n  position: fixed;\n"]))),M=function(e){var n=e.drawer,t=e.toggleDrawer;return Object(D.jsx)(C,{children:Object(D.jsx)(k.a,{edge:"start",color:"inherit",onClick:t(!n),"aria-label":"open drawer",children:Object(D.jsx)(S.a,{})})})},P=t(114),I=t(115),z=t(116),E=t(125),F=t(117),U=t(118),N=t(119),W=t(120),A=t(121),K=t(71),T=t.n(K),B=t(70),G=t.n(B),J=[{name:"name",label:"\u540d\u7a31"},{name:"distance",label:"\u8ddd\u96e2 km"},{name:"rating",label:"\u8a55\u50f9"},{name:"price_level",label:"\u50f9\u683c"}],L=Object(v.c)(P.a)(r||(r=Object(f.a)(["\n  padding: 0.5rem;\n"]))),Q=function(e){var n=e.head,t=e.order,a=e.orderCell,r=e.handleSort;return Object(D.jsx)(I.a,{children:Object(D.jsxs)(z.a,{children:[Object(D.jsx)(L,{}),n.map((function(e){return Object(D.jsx)(L,{sortDirection:a===e.name&&t,children:Object(D.jsx)(E.a,{active:a===e.name,direction:a===e.name?t:"asc",onClick:function(){return r(e.name)},children:e.label})},e.name)}))]})})},Y=Object(v.c)(z.a)(c||(c=Object(f.a)(["\n  & > * {\n    border: none;\n  }\n"]))),Z=Object(v.c)(L)(i||(i=Object(f.a)(["\n  padding: 0 1rem;\n"]))),$=function(e){var n=e.row,t=e.openDetail,a=e.handleOpenDetail;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(Y,{hover:!0,onClick:function(){return a(n.place_id,!1===t)},children:[Object(D.jsx)(L,{children:Object(D.jsx)(k.a,{size:"small",onClick:function(){return a(n.place_id,!1===t)},children:t?Object(D.jsx)(G.a,{}):Object(D.jsx)(T.a,{})})}),Object(D.jsx)(L,{children:n.name}),Object(D.jsx)(L,{children:n.distance}),Object(D.jsx)(L,{children:n.rating}),Object(D.jsx)(L,{children:"$".repeat(n.price_level)})]}),Object(D.jsx)(z.a,{children:Object(D.jsx)(Z,{colSpan:J.length+1,children:Object(D.jsxs)(F.a,{in:!1!==t,timeout:"auto",unmountOnExit:!0,children:[Object(D.jsx)(U.a,{variant:"h6",children:n.name}),t&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(U.a,{variant:"subtitle1",children:t.formatted_address}),Object(D.jsx)(U.a,{variant:"subtitle1",children:t.formatted_phone_number}),Object(D.jsx)(U.a,{variant:"subtitle1",children:"\u71df\u696d\u6642\u9593"}),Object(D.jsx)(U.a,{variant:"subtitle2",children:t.opening_hours.isOpen()?"\u71df\u696d\u4e2d":"\u5c1a\u672a\u958b\u59cb\u71df\u696d"}),t.opening_hours.weekday_text.map((function(e){return Object(D.jsx)(U.a,{variant:"body2",children:e},e.slice(2,3))}))]})]})})})]})},q=function(e,n,t){var a=e[t],r=n[t];return"string"!==typeof a&&"string"!==typeof r||(a=a.toUpperCase(),r=r.toUpperCase()),!a||a<r?-1:a>r?1:0},H=Object(v.c)(N.a)(o||(o=Object(f.a)(["\n  max-width: 500px;\n  word-break: keep-all;\n"]))),R=function(e){var n=e.data,t=e.handleData,a=e.openDetail,r=e.handleOpenDetail,c=Object(u.useState)(null),i=Object(x.a)(c,2),o=i[0],l=i[1],s=Object(u.useState)(null),d=Object(x.a)(s,2),j=d[0],b=d[1];return Object(D.jsx)(H,{children:Object(D.jsxs)(W.a,{stickyHeader:!0,size:"small",children:[Object(D.jsx)(Q,{head:J,order:o,orderCell:j,handleSort:function(e){if(e!==j||!o||"asc"===o){l("desc");var a=n.sort((function(n,t){return q(n,t,e)})).reverse();t(a)}if("desc"===o){l("asc");var r=n.sort((function(n,t){return q(n,t,e)}));t(r)}b(e)}}),Object(D.jsx)(A.a,{children:n.map((function(e){return Object(D.jsx)($,{row:e,openDetail:a[e.place_id],handleOpenDetail:r},e.name)}))})]})})},V=Object(v.b)(l||(l=Object(f.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),X=v.c.div(s||(s=Object(f.a)(["\n  position: relative;\n  transform: translate(-50%, -50%);\n  width: 1rem;\n  height: 1rem;\n  border-radius: 50%;\n  border: 0px solid transparent;\n  background: rgba(9, 157, 148, 0.8);\n  box-shadow: 0px 0px 1rem rgba(9, 157, 148, 0.6),\n    inset 0px 0px 1rem rgba(9, 157, 148, 0.6);\n  &:hover,\n  &.active {\n    transition: all 0.3s ease-in-out;\n    border: 0.25rem solid rgb(9, 157, 148);\n  }\n  &.active {\n    background: none;\n  }\n"]))),ee=function(e){var n=e.place_id,t=e.openDetail,a=e.handleOpenDetail;return Object(D.jsx)(X,{className:t&&"active",onClick:function(){return a(n,!1===t)}})},ne=v.c.div(d||(d=Object(f.a)(["\n  ","\n  width: .25rem;\n  height: 0.25rem;\n  background: #ffffff;\n  border: 0.25rem solid rgb(14, 255, 241);\n  box-shadow: 0px 0px 0.5rem rgba(14, 255, 241, 0.8);\n  border-radius: 50%;\n"])),V),te=v.c.div(j||(j=Object(f.a)(["\n  ","\n  width: 5rem;\n  height: 5rem;\n  border-radius: 50%;\n  background: rgba(14, 255, 241, 0.1);\n  box-shadow: inset 0px 0px 2.5rem rgba(14, 255, 241, 0.1);\n"])),V),ae=function(){return Object(D.jsx)(te,{children:Object(D.jsx)(ne,{})})},re=v.c.div(b||(b=Object(f.a)(["\n  width: 100%;\n  height: 100vh;\n"])));var ce=function(e){var n=e.center,t=e.zoom,a=Object(u.useState)({lat:25.038705,lng:121.567338}),r=Object(x.a)(a,2),c=r[0],i=r[1],o=Object(u.useState)(!1),l=Object(x.a)(o,2),s=l[0],d=l[1],j=Object(u.useState)(null),b=Object(x.a)(j,2),h=b[0],O=b[1],f=Object(u.useState)(null),v=Object(x.a)(f,2),k=v[0],y=v[1],S=Object(u.useState)(null),C=Object(x.a)(S,2),P=C[0],I=C[1],z=Object(u.useState)({}),E=Object(x.a)(z,2),F=E[0],U=E[1],N=Object(u.useState)(!0),W=Object(x.a)(N,2),A=W[0],K=W[1];Object(u.useEffect)((function(){s&&new k.places.PlacesService(h).nearbySearch({location:c,type:"restaurant",rankby:"distance",radius:2e3},(function(e,n){if(n===k.places.PlacesServiceStatus.OK){var t=e.map((function(e){var n=e.place_id,t=e.name,a=e.rating,r=e.price_level,i=e.geometry,o=function(e,n){var t=e.lat*(Math.PI/180),a=n.lat*(Math.PI/180),r=a-t,c=(n.lng-e.lng)*(Math.PI/180);return 12742.142*Math.asin(Math.sqrt(Math.sin(r/2)*Math.sin(r/2)+Math.cos(t)*Math.cos(a)*Math.sin(c/2)*Math.sin(c/2)))}(c,{lat:i.location.lat(),lng:i.location.lng()}).toFixed(2);return{place_id:n,name:t,rating:a,price_level:r,geometry:i,distance:o}}));I(t);var a={};t.forEach((function(e){return a[e.place_id]=!1})),U(a)}}))}),[s,k,h,c]);var T=function(e){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&K(e)}},B=function(e,n){if(!1===n)return U(Object(m.a)(Object(m.a)({},F),{},Object(p.a)({},e,n)));new k.places.PlacesService(h).getDetails({placeId:e,fields:["formatted_address","formatted_phone_number","opening_hours"]},(function(n,t){t===k.places.PlacesServiceStatus.OK&&(U(Object(m.a)(Object(m.a)({},F),{},Object(p.a)({},e,{formatted_address:n.formatted_address,formatted_phone_number:n.formatted_phone_number,opening_hours:n.opening_hours}))),K(!0))}))};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{drawer:A,toggleDrawer:T}),Object(D.jsxs)(_.a,{anchor:"left",variant:"persistent",open:A,onOpen:T(!0),onClose:T(!1),children:[Object(D.jsx)(w.a,{}),P&&Object(D.jsx)(R,{data:P,handleData:function(e){I(e)},openDetail:F,handleOpenDetail:B})]}),Object(D.jsx)(re,{children:Object(D.jsxs)(g.a,{bootstrapURLKeys:{key:"AIzaSyCd6kNCPNNnVZnd45Es3WTY8xfzeYdhUQQ",libraries:["places"]},onChange:function(){s&&i({lat:h.center.lat(),lng:h.center.lng()})},defaultCenter:n,defaultZoom:t,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var n=e.map,t=e.maps;O(n),y(t),d(!0)},children:[Object(D.jsx)(ae,{lat:c.lat,lng:c.lng}),P&&P.map((function(e){var n=e.geometry,t=e.name,a=e.place_id;return Object(D.jsx)(ee,{lat:n.location.lat(),lng:n.location.lng(),place_id:a,openDetail:!1!==F[a],handleOpenDetail:B},t)}))]})})]})};ce.defaultProps={center:{lat:25.038705,lng:121.567338},zoom:16};var ie=function(){return Object(D.jsx)("div",{children:Object(D.jsx)(ce,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=t(72),le=t(122),se=t(124),de=Object(oe.a)({});O.a.render(Object(D.jsx)(le.a,{theme:de,children:Object(D.jsx)(v.a,{theme:de,children:Object(D.jsx)(se.b,{injectFirst:!0,children:Object(D.jsx)(ie,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[87,1,2]]]);
//# sourceMappingURL=main.78c61c96.chunk.js.map